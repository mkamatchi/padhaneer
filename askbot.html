<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ask PadhaNeer Bot</title>
  <link rel="icon" type="image/png" href="images/palm_tree.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Critical navbar CSS to avoid flicker before JS loads -->
  <style id="critical-nav">
    .navbar{position:fixed;top:0;left:0;right:0;height:80px;background:#ffffff;border-bottom:1px solid rgba(0,0,0,0.06);z-index:1000}
    .nav-container{max-width:1200px;margin:0 auto;padding:1rem 2rem;display:flex;align-items:center;justify-content:space-between}
    .logo img{height:40px}
  </style>
  <script src="site-chrome.js" defer></script>
  <style>
    :root { --primary-green:#2D5A3D; --secondary-green:#4A7C59; --accent-green:#6B9B7F; --light-green:#E8F5E8; --warm-beige:#F7F3E9; --golden:#D4AF37; --text-dark:#2C3E50; --text-light:#6C7B7F; --white:#FFFFFF; --shadow:rgba(0,0,0,0.1); }
    body { font-family:'Inter', sans-serif; background: linear-gradient(135deg, var(--warm-beige) 0%, var(--light-green) 100%); margin:0; padding:0; color: var(--text-dark); }

    h1 { font-family:'Playfair Display', serif; color: var(--primary-green); margin-bottom: 10px; }

    .bot-wrapper { max-width: 1200px; margin: 0 auto; display:flex; justify-content:center; align-items:flex-start; gap: 24px; margin-top: 0; flex-wrap: wrap; }
    .bot-image { flex: 0 0 auto; display:flex; align-items:center; }

    .bot-container { flex:1 1 600px; max-width: 700px; background: #fff; padding: 24px; border-radius: 16px; box-shadow: 0 10px 20px var(--shadow); border-left: 4px solid var(--primary-green); }

    input[type="text"] { width:100%; padding: 14px 16px; margin-bottom: 12px; border: 1px solid rgba(44,62,80,0.2); border-radius: 10px; font-size: 16px; outline: none; transition: border-color .2s ease, box-shadow .2s ease; }
    input[type="text"]:focus { border-color: var(--primary-green); box-shadow: 0 0 0 3px rgba(45,90,61,0.15); }

    .bot-container button { background: linear-gradient(135deg, var(--primary-green), var(--secondary-green)); color:#fff; border:none; padding: 10px 20px; font-size:16px; border-radius: 50px; cursor:pointer; font-weight:600; box-shadow: 0 4px 15px rgba(45,90,61,0.3); transition: transform .15s ease, box-shadow .15s ease; }
    .bot-container button:hover { transform: translateY(-1px); box-shadow: 0 6px 18px rgba(45,90,61,0.35); }

    #response { margin-top:16px; font-size:16px; background: #fff; padding:16px; border-radius: 12px; box-shadow: 0 5px 15px var(--shadow); border: 1px solid rgba(44,62,80,0.08); white-space: pre-wrap; word-break: break-word; overflow: auto; max-height: 50vh; }

    .bot-image img { animation: floatBot 2s ease-in-out infinite; width: 200px; height: 280px; }

    @keyframes floatBot { 0%,100%{ transform: translateY(0);} 50%{ transform: translateY(-10px);} }

    @media (max-width: 768px){ body{ padding: 20px 12px; } .bot-wrapper{ gap:16px; } }
    /* Ask Bot only: adjust navbar container alignment to the left (override injected styles) */
    @media (min-width: 992px) {
      body.askbot-page #site-header .nav-container{ max-width: 1200px !important; transform: translateX(-12px) !important; will-change: transform; }
    }
  </style>
</head>
<body class="askbot-page">
  <div id="site-header"><div class="navbar"><div class="nav-container"><a class="logo"><img src="images/logo.jpg" alt="Logo"></a><ul class="nav-menu"></ul></div></div></div>

  <div class="bot-wrapper">
    <div class="bot-container">
      <h1>Ask PadhaNeer Bot</h1>
      <p>Type your question about PadhaNeer, Palmyra trees, or health benefits below:</p>

      <input type="text" id="question" placeholder="e.g. What are the benefits of PadhaNeer?">
      <button onclick="askBot()">Ask</button>

      <div id="response"></div>
    </div>
    <div class="bot-image">
      <img src="images/floating_robot.png" alt="Bot">
    </div>
  </div>

  <br><br><br>

  <div id="site-footer"></div>

  <script>
    async function askBot() {
      const question = document.getElementById('question').value;
      const responseBox = document.getElementById('response');
      responseBox.innerText = "Thinking...";

      try {
        const response = await fetch("/.netlify/functions/askGemini", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ question })
        });

        const data = await response.json();
        responseBox.innerText = data.answer || "Sorry, no answer received.";
      } catch (error) {
        console.error("Frontend error:", error);
        responseBox.innerText = "Oops! Something went wrong.";
      }
    }
  </script>

</body>
</html>
